<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <title>Posts</title>

    <link rel="stylesheet" href="styles.css">

    <script src="script.js" defer></script>

</head>

<body>
    <div>

        <h1>Posts</h1>
        <input type="text" id="searchInput" placeholder="Search by Name">
        <button id="updateDataBtn">Update Data</button>

        <table id="postsTable">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Name</th>
                    <th>Title</th>
                    <th>Body</th>
                </tr>
            </thead>
            <tbody> 
            </tbody>

        </table>

    </div>

</body>

</html>

<script>

 
class Post {
    constructor(userId, title, body) {
        this.name = Post.getNameById(userId);
        this.title = title;
        this.body = body;
    }

    static getNameById(userId) {
        const names = {
            1: 'Athota Srilatha',
            2: 'Bandaru Sampath Kumar',
            3: 'Gollakaram Ganga Bhavani',
            4: 'Gowtham Meka',
            5: 'Mayuraj Ranawat',
            6: 'Narendiran K',
            7: 'Pratham Madhunapanthula',
            8: 'Riya Reddy',
            9: 'Shaik Sameer',
            10: 'Suriyan K',
            11: 'Vaishnavi Panta',
            12: 'Yateesh Tangudu',
        };
        return names[userId];
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const postsTableBody = document.getElementById('postsTable').querySelector('tbody');
    const updateDataBtn = document.getElementById('updateDataBtn');
    const searchInput = document.getElementById('searchInput');

    async function fetchPosts() {
        try {
            const response = await fetch('https://jsonplaceholder.typicode.com/posts');
            const data = await response.json();
            console.log(data);  // Log API response

            postsTableBody.innerHTML = '';  // Clear existing data

            data.forEach((postData, index) => {
                const post = new Post(postData.userId, postData.title, postData.body);
                const row = document.createElement('tr');

                const sNoCell = document.createElement('td');
                sNoCell.textContent = index + 1;

                const nameCell = document.createElement('td');
                nameCell.textContent = post.name;

                const titleCell = document.createElement('td');
                titleCell.textContent = post.title;

                const bodyCell = document.createElement('td');
                bodyCell.textContent = post.body;

                row.appendChild(sNoCell);
                row.appendChild(nameCell);
                row.appendChild(titleCell);
                row.appendChild(bodyCell);

                postsTableBody.appendChild(row);
            });
        } catch (error) {
            console.error('Error fetching posts:', error);
        }
    }

    function filterPosts() {
        const filter = searchInput.value.toLowerCase();
        const rows = postsTableBody.querySelectorAll('tr');
        rows.forEach(row => {
            const nameCell = row.querySelector('td:nth-child(2)');
            if (nameCell) {
                const name = nameCell.textContent.toLowerCase();
                if (name.includes(filter)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
        });
    }

    fetchPosts();  

    updateDataBtn.addEventListener('click', fetchPosts);  
    searchInput.addEventListener('input', filterPosts);
})
 

</script>